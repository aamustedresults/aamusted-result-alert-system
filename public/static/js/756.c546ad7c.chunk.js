"use strict";(self.webpackChunkresults_system=self.webpackChunkresults_system||[]).push([[756],{10756:function(e,r,s){s.r(r);var t=s(74165),n=s(15861),a=s(29439),i=s(72791),l=s(54270),o=s(4567),d=s(64554),u=s(48312),c=s(94721),m=s(63515),h=s(4841),f=s(93006),x=s(82626),p=s(91933),g=s(92506),w=s(81724),v=s(12258),Z=s(43504),j=s(27321),y=s(61820),b=s(45289),S=s(60502),C=s(80184);r.default=function(){var e=(0,i.useState)({severity:"",msg:""}),r=(0,a.Z)(e,2),s=r[0],P=r[1],R=(0,i.useState)(""),_=(0,a.Z)(R,2),B=_[0],k=_[1],z=(0,i.useState)(""),A=(0,a.Z)(z,2),E=A[0],T=A[1],U=(0,i.useState)(""),W=(0,a.Z)(U,2),q=W[0],D=W[1],N=(0,i.useState)(""),F=(0,a.Z)(N,2),H=F[0],I=F[1],Y=(0,i.useState)(""),G=(0,a.Z)(Y,2),J=G[0],M=G[1],O=(0,p.useQuery)(["users"],j.Rf,{suspense:function(){return(0,C.jsx)("div",{children:"loading"})},select:function(e){return e.map((function(e){return{_id:e._id,username:e.username,role:e.role,active:e.active,createdAt:e.createdAt}}))}}),Q={username:B,email:q,role:E,password:H,confirmPassword:J},V=(0,w.Ry)().shape({username:(0,w.Z_)().trim().required(),email:(0,w.Z_)().trim().required().email(),password:(0,w.Z_)().trim().required().min(8,"Password Should be at least 8 characters long"),confirmPassword:(0,w.Z_)().trim().required().oneOf([(0,w.iH)("password"),null],"Passwords do not match")}),X=(0,p.useMutation)(j.cn);return(0,C.jsxs)(C.Fragment,{children:[(0,C.jsx)(l.q,{children:(0,C.jsx)("title",{children:"Results System | Register"})}),(0,C.jsx)("section",{className:"register-user-container",children:(0,C.jsxs)(y.Z,{children:[(0,C.jsx)(o.Z,{variant:"h5",children:"Register New User"}),(0,C.jsx)(d.Z,{sx:{display:"flex",justifyContent:"flex-end"},children:(0,C.jsxs)(u.Z,{children:[(0,C.jsx)(Z.rU,{to:"register",children:"Home"}),(0,C.jsx)(o.Z,{children:"Register"})]})}),(0,C.jsx)(c.Z,{sx:{marginBottom:2}}),s.msg&&(0,C.jsx)(m.Z,{severity:s.severity,onClose:function(){P({severity:"",msg:""})},children:s.msg}),(0,C.jsxs)(d.Z,{sx:{display:"flex",flexDirection:{xs:"column",md:"row"},justifyContent:{xs:"center",md:"space-between"},alignItems:{xs:"center",md:"stretch"},gap:{xs:2,md:6}},children:[(0,C.jsx)(g.J9,{initialValues:Q,validationSchema:V,onSubmit:function(e,r){delete e.confirmPassword,X.mutateAsync(e,{onSettled:function(){r.setSubmitting(!1)},onSuccess:function(){var e=(0,n.Z)((0,t.Z)().mark((function e(s){return(0,t.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:s&&(P({severity:"success",msg:"New User Added!!!"}),r.resetForm());case 1:case"end":return e.stop()}}),e)})));return function(r){return e.apply(this,arguments)}}(),onError:function(e){P({severity:"error",msg:e})}})},enableReinitialize:!0,children:function(e){var r=e.errors,s=e.touched,t=e.handleSubmit,n=e.isSubmitting;return(0,C.jsx)(d.Z,{sx:{paddingY:2},children:(0,C.jsxs)(h.Z,{sx:{width:350,borderTop:"solid 2px #5aa7a7",paddingX:2,paddingY:4,display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",gap:3,boxShadow:"0px 0px 13px 0px rgb(82 63 105 / 10%)",borderRadius:"10px"},children:[(0,C.jsx)(f.Z,{variant:"filled",label:"Username",placeholder:"Enter Username here",fullWidth:!0,size:"small",value:B,onChange:function(e){return k(e.target.value)},error:Boolean(s.username&&r.username),helperText:r.username&&r.username}),(0,C.jsx)(f.Z,{type:"email",variant:"filled",label:"Email Address",placeholder:"Enter email address here",fullWidth:!0,size:"small",value:q,onChange:function(e){return D(e.target.value)},error:Boolean(s.email&&r.email),helperText:r.email&&r.email}),(0,C.jsx)(f.Z,{select:!0,variant:"filled",label:"Select Role",placeholder:"Role",fullWidth:!0,size:"small",value:E,onChange:function(e){return T(e.target.value)},error:Boolean(s.role&&r.role),helperText:r.role&&r.role,children:(0,C.jsx)(x.Z,{value:"administrator",children:"Administrator"})}),(0,C.jsx)(f.Z,{variant:"filled",type:"password",label:"Password",placeholder:"Enter Password here",fullWidth:!0,size:"small",value:H,onChange:function(e){return I(e.target.value)},error:Boolean(s.password&&r.password),helperText:r.password&&r.password}),(0,C.jsx)(f.Z,{variant:"filled",type:"password",label:"Confirm Password",placeholder:"Enter Password here",fullWidth:!0,size:"small",value:J,onChange:function(e){return M(e.target.value)},error:Boolean(s.confirmPassword&&r.confirmPassword),helperText:r.confirmPassword&&r.confirmPassword}),(0,C.jsx)(v.Z,{loading:n,variant:"contained",fullWidth:!0,onClick:t,children:"Register"})]})})}}),(0,C.jsx)(d.Z,{sx:{flexGrow:1},children:(0,C.jsx)(b.Z,{heading:"Users",data:O.data?O.data:[],columns:S.Sf,refresh:O.refetch,showDisableButton:!0})})]})]})})]})}}}]);
//# sourceMappingURL=756.c546ad7c.chunk.js.map